<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.rent">
<!-- 리절트 맵 정의 -->	
	<resultMap id="rentEquipResult" type="RentVO">
	    <result property="resq_num" column="resq_num" />
		<result property="user_id" column="user_id" />
		<result property="eq_serial" column="eq_serial" />
		<result property="resq_start" column="resq_start" />
		<result property="resq_end" column="resq_end" />
		<result property="resq_date" column="resq_date" />
		
		
		<result property="res_num" column="res_num" />
		<result property="res_start" column="res_start" />
		<result property="res_end" column="res_end" />
		<result property="res_Status" column="res_Status" />
		
		<result property="return_num" column="return_num" />
		<result property="express_num" column="express_num" />
		<result property="return_date" column="return_date" />
		<result property="return_Status" column="return_Status" />
		
		<result property="log_num" column="log_num" />
		<result property="status" column="status" />
		<result property="log_maker" column="log_maker" />
		<result property="log_date" column="log_date" />
	    <result property="cate_name" column="cate_name" />
		<result property="eq_name" column="eq_name" />
	</resultMap>
	
	
	  <!-- 로그리스트 조회 -->
  <select id="selectResqList" resultMap="rentEquipResult"   >
    <![CDATA[
      SELECT Resq_num,User_id,Eq_serial,Resq_start ,Resq_end,Resq_date  from Resq	
    ]]>
  </select>
  
  
   <select id="selectAllLogList" resultMap="rentEquipResult"   >
    <![CDATA[
      SELECT Log_num, Resq_num, Res_num, Return_num, User_id, Status, Log_maker,Res_start,Res_end,Log_date,Eq_name,Cate_name,Eq_serial from Log	
    ]]>
  </select>
  
  
  
	<!-- 예약신청리스트 조회 
	
	<select id="selectAllResqList" resultMap="rentEquipResult"   >
    <![CDATA[
  	
    ]]>
  </select>
  

	
	 예약신청 메서드 
	<insert id="reservationrequest1"  parameterType="rentVO">
	 <![CDATA[
			insert into Resq (Resq_num, User_id, Eq_serial, Resq_start, Resq_end) 
			values (#[Resq_num],#[User_id],#[Eq_serial],#[Resq_start],#[Resq_end]);
			
		]]>
	</insert>
	
	<insert id="reservationrequest2"  parameterType="rentVO">
	 <![CDATA[
			
			insert into Log (Log_num,Resq_num,User_id, Log_maker,Res_start,Res_end,Eq_name,Cate_name,Eq_serial) 
			values (#[Log_num],#[Resq_num],#[User_id],#[Log_maker],#[Res_start],#[Res_end],#[Eq_name],#[Cate_name],#[Eq_serial]);
			
		]]>
	</insert>
	
	<insert id="reqationauthor1"  parameterType="rentVO">
	 <![CDATA[
	 insert into Reserve (Res_num, User_id, Eq_serial, Res_start, Res_end, Res_Status) 
			values (#[Res_num],#[User_id],#[Eq_serial],#[Res_start],#[Res_end],#[Res_Status]);
	 ]]>
	</insert>
	
	예약신청승인 메서드 
	<insert id="reqationauthor2"  parameterType="rentVO">
	 <![CDATA[
	 	insert into Log (Log_num,, Res_num, User_id, Status, Log_maker,Res_start,Res_end,Eq_name,Cate_name,Eq_serial) 
			values (#[Log_num],#[Res_num],#[User_id],#[Status],#[Log_maker],#[Res_start],#[Res_end],#[Eq_name],#[Cate_name],#[Eq_serial]);
	 ]]>
	</insert>
	
	<delete id="reqationauthor3"  parameterType="int">
	     <![CDATA[
	        delete from resq 
	    where Resq_num in (
	    SELECT Resq_num FROM resq
	     START WITH Resq_num = #{Resq_num};
	    	 ]]>
	</delete>
	
	예약승인 메서드 
	 <select id="selectReservation" resultType="int"  >
		<![CDATA[
			
		]]>
	</select>
	<update id="reservationauthor1"  parameterType="java.util.Map">
	 <![CDATA[
	 	update Reserve set (Res_Status) 
			values (#[Res_Status]);
	 ]]>
	</update>
	
	<insert id="reservationauthor2"  parameterType="rentVO">
	 <![CDATA[
	 	insert into Log (Log_num,, Res_num, User_id, Status, Log_maker,Res_start,Res_end,Log_date,Eq_name,Cate_name,Eq_serial) 
			values (#[Log_num],#[Res_num],#[User_id],#[Status],#[Log_maker],#[Res_start],#[Res_end],#[Log_date],#[Eq_name],#[Cate_name],#[Eq_serial]);
	 ]]>
	</insert>
	
	 반납 메서드 
	
	<insert id="returnauthor1"  parameterType="rentVO">
	 <![CDATA[
	 	insert into Return (Return_num,, Res_num, Express_num,Return_Status) 
			values (#[Return_num],#[Res_num],#[Express_num],#[Return_Status]);
	 ]]>
	</insert>
	
	<insert id="returnauthor2"  parameterType="rentVO">
	 <![CDATA[
	 	insert into Log (Log_num,, Return_num, User_id, Status, Log_maker,Res_start,Res_end,,Eq_name,Cate_name,Eq_serial) 
			values (#[Log_num],#[Return_num],#[User_id],#[Status],#[Log_maker],#[Res_start],#[Res_end],#[Eq_name],#[Cate_name],#[Eq_serial]);
	 ]]>
	</insert>
	
	<delete id="returnauthor3"  parameterType="int">
	     <![CDATA[
	        delete from Reserve
	     where Res_num in (
	    SELECT Res_num FROM Reserve
	     START WITH Res_num = #{Res_num};
	    	 ]]>
	</delete>
	
	예약신청취소 메서드
		<insert id="reqcancle"  parameterType="rentVO">
	 <![CDATA[
	 	insert into Log (Log_num,, Resq_num, User_id, Status, Log_maker,Resq_start,Resq_end,,Eq_name,Cate_name,Eq_serial) 
			values (#[Log_num],#[Resq_num],#[User_id],#[Status],#[Log_maker],#[Resq_start],#[Resq_end],#[Eq_name],#[Cate_name],#[Eq_serial]);
	 ]]>
	</insert>
	
	
	 예약취소 메서드 
	<insert id="rescancle"  parameterType="rentVO">
	 <![CDATA[
	 	insert into Log (Log_num,, Res_num, User_id, Status, Log_maker,Res_start,Res_end,,Eq_name,Cate_name,Eq_serial) 
			values (#[Log_num],#[Res_num],#[User_id],#[Status],#[Log_maker],#[Res_start],#[Res_end],#[Eq_name],#[Cate_name],#[Eq_serial]);
	 ]]>
	</insert>   -->
</mapper>
